<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Image Uploader</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.7.3/localforage.min.js"></script>
</head>
<body>
<h1>Dementoren Image upload</h1>
<p>hier kannst du ein Bild hochladen: </p>
<input id="fileInput" type="file" accept="image/*"/>

<div id="fileDisplayArea"><!-- waiting for the image --></div>
<iframe id="renderedHtml" class="rendered-html"></iframe>

<script>
    var fileInput = document.getElementById('fileInput');
    var fileDisplayArea = document.getElementById('fileDisplayArea');

    //toDo store image in DB
    var store = localforage.createInstance({
        name: "nameHere"
    });

    var otherStore = localforage.createInstance({
        name: "images"
    });

    fileInput.addEventListener('change', function (e) {
        console.log(fileInput.value);

        var file = fileInput.files[0];
        var imageType = /image.*/;

        if (file.type.match(imageType)) {
            var reader = new FileReader();

            reader.onload = function (e) {
                fileDisplayArea.innerHTML = "";

                // Create a new image.
                var img = new Image();
                // Set the img src property using the data URL.
                img.width = 200;
                img.src = reader.result;

                // Add the image to the page.
                fileDisplayArea.appendChild(img);

                const renderedHtml = document.getElementById('renderedHtml');

                renderedHtml.contentDocument.body.innerHTML = 'Test'
            }

            reader.readAsDataURL(file);
            // localforage.setItem('image', img.src, (e) => console.log('image stored in indexedDB'));
        } else {
            fileDisplayArea.innerHTML = "File not supported!";
        }


    });


</script>
</body>
</html>
